import{e as f,a as j,r as l,j as e}from"./index-e6U2BBYQ.js";import{g as v}from"./Gallery-CdEoQv4C.js";import{a as c,t as N}from"./toast-DlCd64D9.js";const w=()=>{const{code:r}=f(),n=j(),[d,i]=l.useState(null),[m,x]=l.useState([]),[a,u]=l.useState(new Set),[h,g]=l.useState(!0);l.useEffect(()=>{(async()=>{try{const s=await v(r);i(s.event),x(s.photos)}catch{c("Gallery not found or expired")}finally{g(!1)}})()},[r]);const p=useCallback(t=>{u(s=>{const o=new Set(s);return o.has(t)?o.delete(t):o.add(t),o})},[]),b=()=>{if(!a.size)return c("Select at least one photo");N("Proceeding to checkout..."),n(`/g/${r}/checkout`,{state:{selectedIds:[...a]}})};return h?e.jsx("div",{className:"p-6 text-slate-400",children:"Loading gallery..."}):e.jsx("div",{className:"min-h-screen bg-slate-950 text-slate-50",children:e.jsxs("div",{className:"max-w-5xl mx-auto p-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:d?.name}),e.jsx("p",{className:"text-sm text-slate-400",children:"Tap photos to select. Discounts apply automatically."}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 mt-6",children:m.map(t=>{const s=a.has(t.id);return e.jsxs("button",{onClick:()=>p(t.id),className:`relative rounded overflow-hidden border ${s?"border-amber-400 ring-2 ring-amber-400/70":"border-slate-800"}`,children:[e.jsx("img",{src:t.watermarkedUrl,className:"w-full h-40 object-cover"}),e.jsx("div",{className:`absolute inset-0 bg-gradient-to from-black/70 to-transparent ${s?"":"hidden group-hover:flex"}`}),e.jsx("span",{className:"absolute bottom-2 left-2 bg-black/70 text-xs px-2 py-1 rounded",children:s?"Selected":"Tap to select"})]},t.id)})}),e.jsxs("div",{className:"flex justify-between items-center mt-6",children:[e.jsxs("p",{className:"text-sm",children:["Selected:"," ",e.jsx("span",{className:"text-amber-300 font-semibold",children:a.size})]}),e.jsxs("button",{onClick:b,className:"px-4 py-2 bg-amber-400 text-slate-900 font-semibold rounded",children:["Continue (",a.size,")"]})]})]})})};export{w as default};
