import{b as N,a as E,r as a,v as O,c as w,j as t}from"./index-e6U2BBYQ.js";import{a as l,t as f}from"./toast-DlCd64D9.js";const p=30,R=()=>{const{state:h}=N(),i=E(),n=h?.email,[r,o]=a.useState(""),[c,d]=a.useState(p),u=a.useRef([]),g=a.useMemo(()=>[0,1,2,3,4,5],[]);a.useEffect(()=>{if(c<=0)return;const e=setInterval(()=>{d(s=>s-1)},1e3);return()=>clearInterval(e)},[c]);const b=a.useCallback(async()=>{if(r.length!==6){l("Enter 6 digit OTP");return}try{await O(n,r),f("Email verified successfully!"),i("/admin/login")}catch(e){l(e?.response?.data?.message||"Invalid or expired OTP")}},[r,n,i]),j=a.useCallback(async()=>{try{await w(n),f("OTP resent successfully"),o(""),d(p)}catch(e){l(e?.response?.data?.message||"Failed to resend OTP")}},[n]),v=a.useCallback((e,s)=>{const m=e.target.value.replace(/\D/g,"");m&&(o(y=>{const x=y.split("");return x[s]=m,x.join("").slice(0,6)}),s<5&&u.current[s+1]?.focus())},[]);return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl w-full max-w-md",children:[t.jsx("h1",{className:"text-3xl font-semibold text-center mb-2",children:"Email Verification"}),t.jsxs("p",{className:"text-center text-gray-400 mb-8",children:["Code sent to ",t.jsx("span",{className:"font-semibold",children:n})]}),t.jsx("div",{className:"flex justify-center gap-3 mb-8",children:g.map(e=>t.jsx("input",{ref:s=>u.current[e]=s,maxLength:1,value:r[e]||"",onChange:s=>v(s,e),className:"w-12 h-12 text-center border rounded-xl text-lg"},e))}),t.jsx("button",{onClick:b,className:"w-full py-3 rounded-xl bg-blue-700 text-white font-semibold",children:"Verify Account"}),t.jsx("div",{className:"text-center mt-4 text-sm text-gray-500",children:c>0?t.jsxs("span",{children:["Resend OTP in ",c,"s"]}):t.jsx("button",{onClick:j,className:"text-blue-600 font-medium",children:"Resend OTP"})})]})})};export{R as default};
