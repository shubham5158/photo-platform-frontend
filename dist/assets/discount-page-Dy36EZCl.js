import{d as x,r as l,j as e}from"./index-e6U2BBYQ.js";import{t as j,a as g}from"./toast-DlCd64D9.js";const N=async()=>(await x.get("/discounts/global")).data,v=async r=>(await x.put("/discounts/global",r)).data,w=()=>{const[r,n]=l.useState("Default Discounts"),[c,o]=l.useState([{minQty:1,maxQty:1,discountPercent:0},{minQty:2,maxQty:20,discountPercent:5},{minQty:21,maxQty:999,discountPercent:10}]),[i,m]=l.useState(!1),p=async()=>{const t=await N();t&&(n(t.name),o(t.tiers))};l.useEffect(()=>{p()},[]);const d=(t,a,s)=>{o(h=>h.map((u,y)=>y===t?{...u,[a]:Number(s)}:u))},b=async()=>{m(!0);try{await v({name:r,tiers:c}),j("Discount rule saved!")}catch{g("Failed to save rule")}finally{m(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Discount Rules"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Configure per-photo quantity discounts for all galleries."})]}),e.jsxs("section",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm mb-1 text-slate-700",children:"Rule name"}),e.jsx("input",{className:"border border-slate-300 rounded-md px-3 py-2 text-sm",value:r,onChange:t=>n(t.target.value)})]}),e.jsxs("table",{className:"min-w-full text-sm border border-slate-200 rounded-md overflow-hidden",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-3 py-2",children:"Min Qty"}),e.jsx("th",{className:"text-left px-3 py-2",children:"Max Qty"}),e.jsx("th",{className:"text-left px-3 py-2",children:"Discount %"})]})}),e.jsx("tbody",{children:c.map((t,a)=>e.jsxs("tr",{className:"border-b border-slate-100",children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"number",value:t.minQty,onChange:s=>d(a,"minQty",s.target.value),className:"border border-slate-300 rounded-md px-2 py-1 text-sm w-24"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"number",value:t.maxQty,onChange:s=>d(a,"maxQty",s.target.value),className:"border border-slate-300 rounded-md px-2 py-1 text-sm w-24"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"number",value:t.discountPercent,onChange:s=>d(a,"discountPercent",s.target.value),className:"border border-slate-300 rounded-md px-2 py-1 text-sm w-24"})})]},a))})]}),e.jsx("button",{onClick:b,disabled:i,className:"mt-4 px-4 py-2 rounded-md text-sm bg-slate-900 text-white hover:bg-slate-800 disabled:opacity-60",children:i?"Saving...":"Save rule"})]})]})};export{w as default};
